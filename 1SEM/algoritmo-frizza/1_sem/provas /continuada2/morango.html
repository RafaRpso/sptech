<!DOCTYPE html>

<html lang="pt">

<head>

    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Morango</title>

</head>

<body>

    <div id="div_abrir_vendas">

        <h2>------Iniciar as vendas do dia---------</h2>

        Informe a quantidade de caixas colhidas:

        <input id="ipt_qtde_colhida"> <br><br><br>

        <button onclick="abrir()">Abrir as Vendas</button>

    </div>

    <div id="div_registrar_vendas" style="display: none;">

        <h2>------- Registrar Vendas -------</h2>

        Quantidade vendida: <input id="ipt_qtde_vendida">

        Valor de venda: <input id="ipt_val_venda">

        <span id="span_msg_valor"></span> <br><br>

        <button onclick="registrar()">Registrar a Venda</button>

        <button onclick="encerrar()" style="background-color: red;">Encerrar as Vendas</button>

        <div id="div_msg_vendas"></div>

    </div>   

</body>

</html>

<script>
    
    var morangoColhidos= 0 ; 
    var valorDinheiro=0;
    var valorTotal=0;
    var contador=0; 
    var qtdTotalVenda=0;
    var valVendaTotal=0;

function abrir(){ 
    morangoColhidos=ipt_qtde_colhida.value;


    if(morangoColhidos!=Number(morangoColhidos)){
        alert("Insira apenas valores numéricos")
    }
    
    else if (morangoColhidos<0) { 
        alert("Não é possível colher morangos negativos.")
    }
    else if (morangoColhidos==0){
        alert("Não é possível prosseguir com a venda sem morangos colhidos")
    }
    else{

        if (morangoColhidos<100){
            alert("ERRO - Com esse volume de Morangos não dá para abrir as vendas")
        }
        else if (morangoColhidos>2000){ 
                div_registrar_vendas.style.display='block'
                div_abrir_vendas.style.display='none'
            alert("AVISO – Tudo isso!!! Verificar se a quantidade está correta")
        }
        else { 
            div_registrar_vendas.style.display='block'
            div_abrir_vendas.style.display='none'

        }
    }
}



function registrar(){
  
    var valVenda=Number(ipt_val_venda.value);
    var qtdVenda=Number(ipt_qtde_vendida.value);
  
    valVendaTotal  = valVendaTotal+valVenda;
    valorDinheiro+=valVenda*qtdVenda;
    contador++ ;

    if(qtdVenda!=Number(qtdVenda)||valVenda!=Number(valVenda)){
        alert("Insira apenas valores numéricos")
    }

    else if(qtdVenda>0 && morangoColhidos-qtdVenda>=0) { 
        if ( qtdVenda<20 && ( valVenda>=5 && valVenda<=6 ) ){ 
            qtdTotalVenda = Number(qtdTotalVenda) + Number(qtdVenda) ;
            morangoColhidos=morangoColhidos-qtdVenda;
        div_msg_vendas.innerHTML+=`Com a venda de ${qtdVenda} de caixas de Morango o saldo no restante é de ${morangoColhidos} <br>`
        
        }
        else if( ( qtdVenda>=20 && qtdVenda<=40 ) && (valVenda>=4.50 && valVenda<=5.50 )){ 
            qtdTotalVenda = Number(qtdTotalVenda) + Number(qtdVenda) ;
            morangoColhidos=morangoColhidos-qtdVenda;
            div_msg_vendas.innerHTML+=`Com a venda de ${qtdVenda} de caixas de Morango o saldo no restante é de ${morangoColhidos} <br>`
        } 
        else  if (qtdVenda>=40 && (valVenda>=4 && valVenda<=5 )){
            qtdTotalVenda = Number(qtdTotalVenda) + Number(qtdVenda) ;
            morangoColhidos=morangoColhidos-qtdVenda;
            div_msg_vendas.innerHTML+=`Com a venda de ${qtdVenda} de caixas de Morango o saldo no restante é de ${morangoColhidos} <br>`
        }
        else{
            span_msg_valor.innerHTML='Valor errado para essa quantidade vendida'
        }
    }


    else if(morangoColhidos-qtdVenda<0){
        alert("ERRO: Você não tem morangos o suficiente para efetuar a venda")
    }
    else if (qtdVenda<=0){
        alert("ERRO: A quantidade vendida é menor ou igual a zero. Não foi possível cadastrar")
    }
    

    

}


function encerrar(){ 
    div_msg_vendas.innerHTML=' ';
    div_msg_vendas.innerHTML=`<h3> Venda de Morangos </h3> Saldo de produto = ${morangoColhidos} morangos restantes <br><br>
                            Volume total vendido = ${qtdTotalVenda} morangos vendidos <br><br>
                            Valor total das vendas = R$${valorDinheiro.toFixed(2)} arrecadados <br><br>
                            Valor médio das vendas = R$${(valVendaTotal/contador).toFixed(2)}
                            <br><br>
    ` ;

    if( (valVendaTotal/contador) >= 5 || qtdVenda>1000 ){
        div_msg_vendas.innerHTML+='O turno hoje foi bom. ';
    }
    else { 
        div_msg_vendas.innerHTML+='O turno hoje foi normal. ';
    }
}

</script>